(this.webpackJsonptool=this.webpackJsonptool||[]).push([[0],{211:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),i=n.n(c),o=n(71),r=n.n(o),s=(n(211),n(212),n(293)),l=n(79),u=n(17),p=n(116),j=n.n(p),b=(n(221),n(308)),d=n(306),O=n(291),h=n(9),f=n(8),x=n(14),m=n.n(x),v=n(190),g=n(191),y="SET_SOCKETIO_ID",S="INVALIDATE_SOCKETIO_ID",C="SET_LOGIN_TOKEN",T="UNSET_LOGIN_TOKEN",P="UPDATE_IS_SUBMITTED",D="FETCH_PAPERS",k="CHANGE_CURRENT_PAPER_DETAILS",I="CHANGE_PAPER_ID",_="CREATE_PAPER",F="IS_REFRESHING",E="CHANGE_ROOT_PAPER_ID",w="CHANGE_SPECIAL_PAPER_ID",A="IS_SPECIAL_PAPER_MODAL_OPEN",N=n(69),q=function(e,t){switch(t.type){case y:return Object(N.a)(e,(function(e){e.socket_io_id=t.payload}));case S:return Object(N.a)(e,(function(e){e.socket_io_id=null}));case C:return Object(N.a)(e,(function(e){e.authToken=t.payload.token,e.roles=t.payload.roles}));case T:return Object(N.a)(e,(function(e){e.authToken=null,e.roles=null,e.isSubmitted=!1,e.isSpecialPaper=!1,e.isSpecialPaperModalOpen=!1,e.rootPaperID="",e.rootPaperName="",e.paperID="",e.paperName="",e.paperGrade="",e.paperSubject="",e.paperType="",e.papers={},e.spapers={},e.isRefreshing=!1}));case P:return Object(N.a)(e,(function(e){e.isSubmitted=t.payload}));case F:return Object(N.a)(e,(function(e){e.isRefreshing=t.payload}));case D:return Object(N.a)(e,(function(e){e.papers=[],t.payload.npapers.forEach((function(t){e.papers[t.paperType]||(e.papers[t.paperType]={papers:[]}),e.papers[t.paperType].papers.push({name:t.paperName,id:t._id})})),t.payload.spapers.forEach((function(t){e.spapers[t.name]||(e.spapers[t.name]={name:t.name,_id:t._id})}))}));case A:var n=Object(h.a)({},e);return n.isSpecialPaperModalOpen=t.payload,n;case k:return Object(h.a)(Object(h.a)({},e),{},{paperGrade:t.payload.grade,paperSubject:t.payload.subject,paperName:t.payload.paperName,paperType:t.payload.paperType});case E:var a=Object(h.a)({},e);return a.rootPaperID=t.payload.rootPaperID,a.rootPaperName=t.payload.rootPaperName,a;case w:var c=Object(h.a)({},e);return c.paperID=t.payload.paperID,c.isSpecialPaper=!0,c;case I:var i=Object(h.a)({},e);return i.paperID=t.payload.paperID,i.isSpecialPaper=!1,i;case _:var o=Object(h.a)(Object(h.a)({},e),{},{papers:Object(h.a)({},e.papers)});return o.paperID=t.payload._id,o.paperName=t.payload.paperName,o.paperGrade=t.payload.grade,o.paperSubject=t.payload.subject,o.papers[t.payload.paperType]||(o.papers[t.payload.paperType]={papers:[]}),o.papers[t.payload.paperType].papers.push({name:t.payload.paperName,id:t.payload._id}),o;default:return e}};m.a.defaults.baseURL="/api/";var Q=Object(g.io)("https://admintool-rabbitmq-consumer.herokuapp.com/"),R={authToken:function(){try{var e=localStorage.getItem("authToken"),t=Object(v.a)(e).exp;return Date.now()>=1e3*t?null:e}catch(n){return null}}(),roles:localStorage.getItem("roles")?localStorage.getItem("roles").split(","):[],isSubmitted:!1,isSpecialPaper:!1,isSpecialPaperModalOpen:!1,rootPaperID:"",rootPaperName:"",paperID:"",paperName:"",paperGrade:"",paperSubject:"",paperType:"",currentQuestions:[],papers:{},spapers:{},socket_io_id:null,isRefreshing:!1},G=Object(c.createContext)(R),L=function(e){var t=e.children,n=Object(c.useReducer)(q,R),i=Object(f.a)(n,2),o=i[0],r=i[1];Q.on("connect",(function(){r({type:y,payload:Q.id})})),Q.on("disconnect",(function(){r({type:S})}));var s=function(e,t,n){p.store.addNotification({title:e,message:n,type:t,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3,onScreen:!0}})};return Object(a.jsxs)(G.Provider,{value:Object(h.a)(Object(h.a)({},o),{},{changeSpecialPaperModalVisibility:function(e){r({type:A,payload:e})},changeRootPaperID:function(e,t){r({type:E,payload:{rootPaperID:e,rootPaperName:t}})},updatePaperDetails:function(e){r({type:k,payload:{grade:e.grade,subject:e.subject,paperName:e.paperName,paperType:e.paperType}})},changeSpecialPaperID:function(e){r({type:w,payload:{paperID:e}})},changePaperID:function(e){r({type:I,payload:{paperID:e}})},createPaperDispatch:function(e,t){m.a.post("create-paper",e,{headers:{AuthToken:t}}).then((function(e){var t=e.data;t.success?(r({type:_,payload:t.paper}),s("Success!","success","Paper created successfully")):t.errors.forEach((function(e){s("Error!","danger",e)}))})).catch((function(e){s("Error!","danger",e.message)}))},fetchPapers:function(e){m.a.get("papers",{headers:{AuthToken:e}}).then((function(e){var t=e.data;if(!t)throw new Error("Failed to fetch papers");r({type:D,payload:t})})).catch((function(e){s("Error!","danger",e.message)}))},fetchQuestions:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m.a.get("/paper-questions/".concat(e,"/").concat(n,"/").concat(a),{headers:{AuthToken:t}})},setIsSample:function(e,t,n){return m.a.post("/set-sample/".concat(t),{isSample:n},{headers:{AuthToken:e}}).then((function(e){var t=e.data;if(t.success)return s("Success!","success","Question set/removed as sample"),t.success;throw new Error("Failed to set question as sample")})).catch((function(e){return s("Error!","danger",e.message),!1}))},isSubmittedDispatch:function(e){r({type:P,payload:e})},addQuestion:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.a.post("/create-question/".concat(n),e,{headers:{AuthToken:t}})},searchForQuestions:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m.a.get("/search/".concat(t,"/").concat(a,"?").concat(n),{headers:{AuthToken:e}})},removeQuestionDispatch:function(e,t){return m.a.delete("/remove-question/".concat(e),{headers:{AuthToken:t}})},loginDispatch:function(e){console.log("/api/"),m.a.post("/user/login",e).then((function(e){var t=e.data;if(!t.success)throw new Error("There was an error");localStorage.setItem("authToken",t.token),localStorage.setItem("roles",t.roles),r({type:C,payload:{token:t.token,roles:t.roles}}),s("Success!","success","Welcome")})).catch((function(e){s("Error!","danger",e.message)}))},approveQuestionDispatch:function(e,t,n){return m.a.get("approve-question/".concat(e),{headers:{AuthToken:n}})},submitPaperDispatch:function(e,t,n){return m.a.post("/submit-paper",{paperID:t,clientID:e},{headers:{AuthToken:n}})},createNotification:s,logoutDispatcher:function(){r({type:T})},removePaper:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.a.delete("/remove-paper/".concat(e,"/").concat(n),{headers:{AuthToken:t}})},setIsRefreshingDispatch:function(e){r({type:F,payload:e})},fetchAdminGrades:function(e){return m.a.get("admin/grades",{headers:{AuthToken:e}})},socketIO:Q}),children:[" ",t," "]})},M=n(298),B=n(302),H=n(295),z=n(294),U=function(e){var t=e.createPaper,n=Object(c.useContext)(G),i=n.authToken,o=n.createNotification,r=Object(c.useState)(!1),s=Object(f.a)(r,2),l=s[0],u=s[1],p=Object(c.useState)([]),j=Object(f.a)(p,2),b=j[0],d=j[1],O=Object(c.useState)({}),x=Object(f.a)(O,2),v=x[0],g=x[1],y=Object(c.useState)([]),S=Object(f.a)(y,2),C=S[0],T=S[1],P=Object(c.useState)([]),D=Object(f.a)(P,2),k=D[0],I=D[1],_=Object(c.useState)({grade:"",subject:"",paperType:""}),F=Object(f.a)(_,2),E=F[0],w=F[1];Object(c.useEffect)((function(){m.a.get("/user/metadata",{headers:{AuthToken:i}}).then((function(e){var t=e.data,n=t.paperTypeCanDo.map((function(e,t){return{key:"".concat(e.replaceAll(" ",""),"_").concat(t),text:e,value:e}}));T(n);var a=t.contentCanDo.map((function(e,t){return{key:"".concat(e.grade,"_").concat(t),text:e.grade,value:e.grade}}));d(a);var c=t.contentCanDo.reduce((function(e,t){return e[t.grade]=t.subjects.map((function(e,t){return{key:"".concat(e.replaceAll(" ",""),"_").concat(t),text:e,value:e}})),e}),{});g(c)})).catch((function(e){u(!1),o("Error!","danger",e.message)}))}),[]);return Object(a.jsxs)(M.a,{onClose:function(){return u(!1)},onOpen:function(){return u(!0)},size:"tiny",open:l,trigger:Object(a.jsx)(B.a,{basic:!0,compact:!0,fluid:!0,primary:!0,content:"create paper",icon:"pencil alternate",labelPosition:"right"}),children:[Object(a.jsx)(M.a.Header,{children:"New Paper"}),Object(a.jsx)(M.a.Content,{children:Object(a.jsxs)(H.a,{children:[Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Grade"}),Object(a.jsx)(z.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{grade:n})),I(v[n])},selection:!0,fluid:!0,options:b,placeholder:"Select Grade"})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Subject"}),Object(a.jsx)(z.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{subject:n}))},selection:!0,fluid:!0,options:k,placeholder:"Select Subject"})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Paper Type"}),Object(a.jsx)(z.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{paperType:n}))},selection:!0,fluid:!0,options:C,placeholder:"Select Paper Type"})]})]})}),Object(a.jsx)(M.a.Actions,{children:Object(a.jsxs)(B.a.Group,{children:[Object(a.jsx)(B.a,{color:"black",onClick:function(e){e.preventDefault(),u(!1)},children:"Cancel"}),Object(a.jsx)(B.a.Or,{}),Object(a.jsx)(B.a,{onClick:function(e){e.preventDefault(),t(E),u(!1)},positive:!0,children:"Create Paper"})]})})]})},K=n(305),V=n(66),Y=n(299),J=function(e){var t=e.paperType,n=e.papers,i=e.handlePaperSelect,o=Object(c.useState)(!1),r=Object(f.a)(o,2),s=r[0],l=r[1],u=Object(c.useContext)(G).paperID;return Object(a.jsxs)("div",{style:{marginBottom:"6px"},children:[Object(a.jsxs)(K.a,{as:"h5",onClick:function(){return l(!s)},style:{cursor:"pointer"},children:[Object(a.jsx)(V.a,{color:"yellow",name:s?"folder open":"folder"}),t]}),Object(a.jsx)("div",{style:{marginLeft:"10px",marginBottom:"10px"},hidden:!s,children:Object(a.jsx)(Y.a,{divided:!0,verticalAlign:"middle",children:n.map((function(e,t){var n=u===e.id;return Object(a.jsxs)(Y.a.Item,{onContextMenu:function(t){return function(e,t){e.preventDefault()}(t,"".concat(e.id))},onClick:function(){return i("".concat(e.id))},children:[Object(a.jsx)(Y.a.Icon,{name:n?"file alternate":"file alternate outline"}),Object(a.jsx)(Y.a.Content,{children:Object(a.jsx)(Y.a.Header,{as:"a",children:Object(a.jsx)("div",{style:{textDecoration:n?"underline":"inherit"},children:e.name.charAt(0).toUpperCase()+e.name.slice(1)})})})]},"pp_".concat(t))}))})})]})},Z=n(138),W=function(){var e=Object(c.useContext)(G),t=e.authToken,n=e.createNotification,i=e.fetchPapers,o=Object(c.useState)(!1),r=Object(f.a)(o,2),s=r[0],l=r[1],u=Object(c.useState)(!1),p=Object(f.a)(u,2),j=p[0],b=p[1],O=Object(c.useState)([]),x=Object(f.a)(O,2),v=x[0],g=x[1],y=Object(c.useState)(null),S=Object(f.a)(y,2),C=S[0],T=S[1],P=Object(c.useState)(!1),D=Object(f.a)(P,2),k=D[0],I=D[1],_=Object(c.useState)({grade:"",paperType:"",excelFile:null}),F=Object(f.a)(_,2),E=F[0],w=F[1],A=function(e){l(e),e||(I(!1),T(null))};Object(c.useEffect)((function(){m.a.get("/user/metadata",{headers:{AuthToken:t}}).then((function(e){var t=e.data;g(t.contentCanDo.map((function(e,t){return{key:"".concat(e.grade,"_").concat(t),text:e.grade,value:e.grade}})))})).catch((function(e){T(e.message),I(!0)}))}),[t]);return Object(a.jsxs)(M.a,{onClose:function(){return A(!1)},onOpen:function(){return A(!0)},size:"tiny",open:s,trigger:Object(a.jsx)(B.a,{content:"import excel",style:{marginTop:"5px"},icon:"upload",fluid:!0,labelPosition:"right",compact:!0,primary:!0,basic:!0}),children:[Object(a.jsx)(M.a.Header,{children:"Import Excel File"}),Object(a.jsxs)(M.a.Content,{children:[k&&C?Object(a.jsxs)(d.a,{style:{color:"red"},children:[Object(a.jsx)(Z.a,{icon:"times",corner:"right",onClick:function(e){return I(!1)},color:"red"}),C]}):null,Object(a.jsxs)(H.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Grade"}),Object(a.jsx)(z.a,{onChange:function(e,t){var n=t.value;w(Object(h.a)(Object(h.a)({},E),{},{grade:n}))},selection:!0,fluid:!0,options:v,placeholder:"Select Grade"})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Excel file"}),Object(a.jsx)("input",{type:"file",onChange:function(e){w(Object(h.a)(Object(h.a)({},E),{},{excelFile:e.target.files[0]}))}})]}),Object(a.jsx)(B.a,{type:"button",loading:j,primary:!0,content:"Upload file",fluid:!0,onClick:function(){I(!1),T(null),b(!0);var e=new FormData;Object.entries(E).filter((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return"excelFile"!==n})).forEach((function(t){var n=Object(f.a)(t,2),a=n[0],c=n[1];e.append(a,c)})),e.append("excelFile",E.excelFile,E.excelFile.name),m.a.post("/import-excel-paper",e,{headers:{AuthToken:t}}).then((function(e){var a=e.data;if(a){if(a.success)return A(!1),n("Success!","success","Imported data successfully"),void i(t);throw new Error(a.error)}})).catch((function(e){T(e.message),I(!0)})).finally((function(){b(!1)}))}})]})]})]})},X=n(301),$=n(310),ee=n(194),te=n.n(ee),ne=function(){var e=Object(c.useContext)(G),t=e.authToken,n=e.rootPaperID,i=e.createNotification,o=e.isSpecialPaperModalOpen,r=e.changeSpecialPaperModalVisibility,s=Object(c.useState)(!1),l=Object(f.a)(s,2),u=l[0],p=l[1],j=Object(c.useState)(!1),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(c.useState)(""),g=Object(f.a)(v,2),y=g[0],S=g[1],C=Object(c.useState)(!1),T=Object(f.a)(C,2),P=T[0],D=T[1],k=Object(c.useState)([{key:"index_0",text:"Model Paper",value:"Model Paper"},{key:"index_1",text:"Past Paper",value:"Past Paper"}]),I=Object(f.a)(k,2),_=I[0],F=(I[1],["Kiswahili","English","Mathematics","Science","SST&CRE"]),E=Object(c.useState)([]),w=Object(f.a)(E,2),A=w[0],N=w[1],q=Object(c.useState)(null),Q=Object(f.a)(q,2),R=Q[0],L=Q[1],U=Object(c.useState)(!1),K=Object(f.a)(U,2),V=K[0],Y=K[1],J=Object(c.useState)({paperType:"",name_or_year:"",subject:""}),W=Object(f.a)(J,2),ee=W[0],ne=W[1];Object(c.useEffect)((function(){N(F.map((function(e,t){return{key:"available_subject_".concat(t),text:e,value:e}})))}),[]);var ae=function(e){ne((function(t){return Object(h.a)(Object(h.a)({},t),{},{name_or_year:e.target.value})}))};return Object(a.jsxs)(M.a,{onClose:function(){return r(e=!1),void(e||(Y(!1),L(null)));var e},size:"tiny",open:o,children:[Object(a.jsx)(M.a.Header,{children:"KCPE model/past paper"}),Object(a.jsxs)(M.a.Content,{children:[V&&R?Object(a.jsxs)(d.a,{style:{color:"red"},children:[Object(a.jsx)(Z.a,{icon:"times",corner:"right",onClick:function(e){return Y(!1)},color:"red"}),R]}):null,Object(a.jsxs)(H.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Paper Type"}),Object(a.jsx)(z.a,{onChange:function(e,t){var n=t.value;ne((function(e){return Object(h.a)(Object(h.a)({},e),{},{paperType:n})})),p(!("model paper"===n.toLowerCase()))},selection:!0,fluid:!0,options:_,placeholder:"Select Paper Type"})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:u?"Year":"Paper Name"}),u?Object(a.jsx)("input",{type:"number",onChange:ae,min:"1986",max:(new Date).getFullYear()-1}):Object(a.jsx)("input",{type:"text",onChange:ae})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Subject"}),Object(a.jsx)(z.a,{onChange:function(e,t){var n=t.value;ne((function(e){return Object(h.a)(Object(h.a)({},e),{},{subject:n})}))},selection:!0,fluid:!0,options:A,placeholder:"Select Subject"})]}),Object(a.jsxs)(X.a,{children:[Object(a.jsx)(H.a.Field,{children:Object(a.jsx)($.a,{value:P,onChange:function(){return D((function(e){return!e}))},label:"Is Timed"})}),P?Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(te.a,{onChange:S,defaultTime:"00:00",inputVisible:!0,value:y,isOpen:!1})}):null]}),Object(a.jsx)(B.a,{type:"button",loading:O,primary:!0,content:"Create Paper",fluid:!0,onClick:function(){x(!0);var e=y.split(":"),a=6e4*(60*+e[0]+ +e[1]),c=Object(h.a)(Object(h.a)({},ee),{},{isTimed:P,duration:a,rootID:n});m.a.post("/special-paper",c,{headers:{AuthToken:t}}).then((function(e){if(!e.data.status)throw new Error("Failed to create paper");i("Success!","success","Paper created successfully")})).catch((function(e){i("Error!","danger","Failed to create paper")})).finally((function(){x(!1),r(!1)}))}})]})]})]})},ae=function e(t){var n=t.parentName,i=t.spaper,o=t.rootPath,r=t.isRootFolder,s=void 0!==r&&r,l=Object(c.useContext)(G),u=l.changeRootPaperID,p=l.authToken,j=l.paperID,b=l.changeSpecialPaperID,d=l.changeSpecialPaperModalVisibility,O=Object(c.useState)(!1),h=Object(f.a)(O,2),x=h[0],v=h[1],g=Object(c.useState)(!1),y=Object(f.a)(g,2),S=y[0],C=y[1],T=Object(c.useState)([]),P=Object(f.a)(T,2),D=P[0],k=P[1];Object(c.useEffect)((function(){x&&m.a.get("/special-paper/".concat(o),{headers:{AuthToken:p}}).then((function(e){var t=e.data;if(!t.status)throw new Error(t.error||"Unable to fetch folders");C(t.files.areFiles),k(t.files.folders),console.log(t.files.folders)})).catch((function(e){console.log(e)}))}),[x]);return Object(a.jsxs)("div",{style:{marginLeft:s?"inherit":"18px",marginBottom:"6px"},children:[Object(a.jsxs)(K.a,{as:"h5",onClick:function(){v((function(e){return!e})),s&&u(i._id,i.name)},onContextMenu:function(e){return s?function(e,t){e.preventDefault(),u(i._id,i.name),d(!0)}(e):null},style:{cursor:"pointer"},children:[Object(a.jsx)(V.a,{color:"yellow",name:x?"folder open":"folder"}),n]}),x?S?Object(a.jsx)("div",{style:{marginLeft:"18px",marginBottom:"10px"},hidden:!x,children:Object(a.jsx)(Y.a,{divided:!0,verticalAlign:"middle",children:D.map((function(e,t){var n=e.subject,c=e._id,i=j===c;return Object(a.jsxs)(Y.a.Item,{onClick:function(){return b("".concat(c))},children:[Object(a.jsx)(Y.a.Icon,{name:i?"file alternate":"file alternate outline"}),Object(a.jsx)(Y.a.Content,{children:Object(a.jsx)(Y.a.Header,{as:"a",children:Object(a.jsx)("div",{style:{textDecoration:i?"underline":"inherit"},children:n.charAt(0).toUpperCase()+n.slice(1)})})})]},"pp_".concat(t))}))})}):Object(a.jsx)(a.Fragment,{children:D.map((function(t){var n=t.name,c=t._id;return Object(a.jsx)(e,{parentName:n,spaper:{},rootPath:"".concat(o,"/").concat(c)})}))}):null]})},ce=function(){var e=Object(c.useContext)(G).spapers;return Object(a.jsxs)("div",{children:[Object.keys(e).length?Object(a.jsx)(O.a,{horizontal:!0,children:"special papers"}):null,Object.entries(e).map((function(e){var t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(ae,{parentName:n,spaper:c,rootPath:c._id,isRootFolder:!0})}))]})},ie=function(){var e=Object(c.useContext)(G),t=e.changePaperID,n=e.createPaperDispatch,i=e.papers,o=e.authToken,r=e.fetchPapers;Object(c.useEffect)((function(){r(o)}),[]);var s=function(e){t(e)};return Object(a.jsxs)(d.a,{style:{position:"sticky",top:"10px"},children:[Object(a.jsxs)("div",{style:{padding:"5px",borderRadius:"5px",border:"1px solid grey"},children:[Object(a.jsx)(U,{createPaper:function(e){n(e,o)}}),Object(a.jsx)(ne,{}),Object(a.jsx)(W,{})]}),Object(a.jsxs)("div",{style:{marginTop:"10px",padding:"10px"},children:[Object(a.jsx)(O.a,{horizontal:!0,children:"papers"}),Object.keys(i).map((function(e,t){return Object(a.jsx)(J,{handlePaperSelect:s,paperType:e,papers:i[e].papers},"pt_".concat(t))})),Object(a.jsx)(ce,{})]})]})},oe=n(292),re=n(12),se=n(296),le=n(311),ue=n(197),pe=(n(264),n(93)),je=n(300),be=function(e){var t=e.children,n=Object(pe.a)(e,["children"]);return Object(a.jsx)(je.a,Object(h.a)(Object(h.a)({fluid:!0},n),{},{children:Object(a.jsx)(je.a.Content,{children:t})}))},de=n(43),Oe=n(47),he=n.n(Oe),fe=function(e){var t=e.handleTopicAndSubject,n=e.topic,c=void 0===n?" ":n,i=e.subtopic,o=void 0===i?" ":i;return Object(a.jsxs)(H.a.Group,{inline:!0,children:[Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Topic"}),Object(a.jsx)("input",{name:"topic",value:c,onChange:t,placeholder:"Topic"})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Sub Topic"}),Object(a.jsx)("input",{name:"subTopic",value:o,onChange:t,placeholder:"Sub Topic"})]})]})},xe=[["undo","redo","font","fontSize","formatBlock","bold","underline","italic","strike","subscript","superscript","removeFormat","fontColor","hiliteColor","outdent","indent","align","horizontalRule","list","table","image","fullScreen","showBlocks","preview"]],me=function(e){var t=e.saveQuestionToDatabase,n=e.retrievedQuestion,i=void 0===n?{}:n,o=e.index,r=e.isSubmitted,s=void 0!==r&&r,l=Object(c.useContext)(G).roles,u=Object(c.useCallback)((function(e){return l.includes(e)}),[l])("can:review"),p=Object(c.useState)(""),j=Object(f.a)(p,2),b=j[0],d=j[1],O=Object(c.useState)({topic:" ",subTopic:" "}),x=Object(f.a)(O,2),m=x[0],v=x[1],g=Object(c.useState)([]),y=Object(f.a)(g,2),S=y[0],C=y[1],T=Object(c.useState)(""),P=Object(f.a)(T,2),D=P[0],k=P[1];Object(c.useEffect)((function(){var e=i&&i.question?i.question:"",t=i&&i.options_next?i.options_next.map((function(e){return{option:e.option,isCorrect:e.isCorrect}})):[],n=i&&i.additionalInfo?i.additionalInfo:"",a=i&&i.topic?{topic:i.topic,subTopic:i.subTopic}:{topic:" ",subTopic:" "};v(a),d(e),C(t),k(n)}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(H.a,{onSubmit:function(e){e.preventDefault();var n={questionType:"normal",question_id:i?i._id:null,question:b,options_next:S,topic:m.topic,subTopic:m.subTopic,additionalInfo:D||""};t(n,o)},children:[Object(a.jsx)(fe,{handleTopicAndSubject:function(e){v(Object(h.a)(Object(h.a)({},m),{},Object(de.a)({},e.target.name,e.target.value)))},topic:m.topic,subtopic:m.subTopic}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){return d(e)},setContents:b,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,primary:!0,disabled:s&&!u,onClick:function(e){e.preventDefault(),C([].concat(Object(re.a)(S),[{option:"",isCorrect:!1}]))},icon:"add",content:"Option",labelPosition:"right"})}),S.map((function(e,t){return Object(a.jsx)(H.a.Field,{children:Object(a.jsxs)(H.a.Group,{widths:"1",inline:!0,children:[Object(a.jsx)(H.a.Field,{children:Object(a.jsx)($.a,{disabled:s&&!u,defaultChecked:!(!i||!e.isCorrect),onClick:function(e){return function(e){var t=Object(re.a)(S);t[e].isCorrect=!t[e].isCorrect,C(t)}(t)}})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)("input",{value:i?e.option:null,onChange:function(e){return function(e,t){var n=Object(re.a)(S);n[t].option=e.target.value,C(n)}(e,t)},type:"text"})}),Object(a.jsx)(B.a,{type:"button",circular:!0,icon:"superscript",disabled:s&&!u,compact:!0,basic:!0,color:"teal"}),Object(a.jsx)(B.a,{type:"button",circular:!0,compact:!0,basic:!0,color:"red",disabled:s&&!u,icon:!0,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(re.a)(S);n.splice(t,1),C(n)}(e,t)},children:Object(a.jsx)(V.a,{name:"trash alternate outline"})})]})},"option_".concat(t))})),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,primary:!0,disabled:!!D||s,onClick:function(e){e.preventDefault(),k(" ")},content:"Additional Information",icon:"add",labelPosition:"right"})}),Object(a.jsx)(H.a.Field,{children:D?Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){k(e)},setContents:D,showToolbar:!0,enableToolbar:!0}):null}),Object(a.jsx)(B.a,{basic:!0,color:"green",content:"Save Question",disabled:s&&!u,icon:"save",labelPosition:"right"})]})})},ve=function(e){var t=e.saveQuestionToDatabase,n=e.retrievedQuestion,i=e.index,o=e.isSubmitted,r=void 0!==o&&o,s=Object(c.useContext)(G).roles,l=Object(c.useCallback)((function(e){return s.includes(e)}),[s])("can:review"),u=Object(c.useState)(n?n.question:""),p=Object(f.a)(u,2),j=p[0],b=p[1],d=Object(c.useState)(n&&n.topic?{topic:n.topic,subTopic:n.subTopic}:{topic:" ",subTopic:" "}),O=Object(f.a)(d,2),x=O[0],m=O[1],v=Object(c.useState)(n?n.children.map((function(e){var t=e.options,n=Object(pe.a)(e,["options"]);return Object(h.a)(Object(h.a)({},n),{},{options:t.map((function(e){return{option:e.option,isCorrect:e.isCorrect}}))})})):[]),g=Object(f.a)(v,2),y=g[0],S=g[1];return Object(a.jsxs)(H.a,{onSubmit:function(e){e.preventDefault();var a={questionType:"comprehension",question:j,question_id:n?n._id:null,children:y,topic:x.topic,subTopic:x.subTopic};t(a,i)},children:[Object(a.jsx)(fe,{handleTopicAndSubject:function(e){m(Object(h.a)(Object(h.a)({},x),{},Object(de.a)({},e.target.name,e.target.value)))},topic:x.topic,subtopic:x.subTopic}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){return b(e)},setContents:j,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{disabled:r,primary:!0,onClick:function(e){e.preventDefault(),S([].concat(Object(re.a)(y),[{question:"",additionalInfo:"",options:[]}]))},icon:"add",content:"Question",labelPosition:"right"})}),y.map((function(e,t){return Object(a.jsxs)(be,{children:[Object(a.jsxs)(K.a,{as:"h4",children:["Sub question ",t+1]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,disabled:r,basic:!0,color:"red",onClick:function(e){return function(e){var t=Object(re.a)(y);t.splice(e,1),S(t)}(t)},content:"Delete",icon:"trash alternate outline",labelPosition:"right"})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){return function(e,t){var n=Object(re.a)(y);n[t].question=e,S(n)}(e,t)},setContents:e.question,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,disabled:r&&!l,primary:!0,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(re.a)(y);n[t].options.push({option:"",isCorrect:!1}),S(n)}(e,t)},icon:"add",content:"Option",labelPosition:"right"})}),e.options.map((function(e,n){var c=e.option,i=e.isCorrect;return Object(a.jsx)(H.a.Field,{children:Object(a.jsxs)(H.a.Group,{widths:"1",inline:!0,children:[Object(a.jsx)(H.a.Field,{children:Object(a.jsx)($.a,{disabled:r&&!l,onClick:function(e){return function(e,t){var n=Object(re.a)(y);n[e].options[t].isCorrect=!n[e].options[t].isCorrect,S(n)}(t,n)},defaultChecked:i})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)("input",{onChange:function(e){return function(e,t,n){var a=Object(re.a)(y);a[t].options[n].option=e.target.value,S(a)}(e,t,n)},value:c,type:"text"})}),Object(a.jsx)(B.a,{type:"button",circular:!0,icon:"superscript",disabled:r&&!l,compact:!0,basic:!0,color:"teal"}),Object(a.jsx)(B.a,{type:"button",circular:!0,compact:!0,disabled:r&&!l,basic:!0,color:"red",icon:"trash alternate outline",onClick:function(e){return function(e,t){var n=Object(re.a)(y);n[e].options.splice(t,1),S(n)}(t,n)}})]})},"option_".concat(n))})),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,primary:!0,disabled:!!e.additionalInfo||r&&!l,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(re.a)(y);n[t].additionalInfo=" ",S(n)}(e,t)},content:"Additional Information",icon:"add",labelPosition:"right"})}),Object(a.jsx)(H.a.Field,{children:e.additionalInfo?Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){return function(e,t){var n=Object(re.a)(y);n[t].additionalInfo=e,S(n)}(e,t)},setContents:e.additionalInfo,showToolbar:!0,enableToolbar:!0}):null})]},"inner_ques_".concat(t))]},"innerQuestion_".concat(t))})),Object(a.jsx)(B.a,{basic:!0,color:"green",disabled:r&&!l,content:"Save Question",icon:"save",labelPosition:"right"})]})},ge=function(e){e.saveQuestionToDatabase;var t=e.retrievedQuestion,n=void 0===t?{}:t,i=(e.index,e.isSubmitted),o=void 0!==i&&i,r=Object(c.useContext)(G).roles,s=Object(c.useCallback)((function(e){return r.includes(e)}),[r])("can:review"),l=Object(c.useState)(""),u=Object(f.a)(l,2),p=u[0],j=u[1],b=Object(c.useState)({topic:" ",subTopic:" "}),d=Object(f.a)(b,2),O=d[0],x=d[1],m=Object(c.useState)([]),v=Object(f.a)(m,2),g=v[0],y=v[1],S=Object(c.useState)(""),C=Object(f.a)(S,2),T=C[0],P=C[1];Object(c.useEffect)((function(){var e=n&&n.question?n.question:"",t=n&&n.options_next?n.options_next.map((function(e){return{option:e.option,isCorrect:e.isCorrect}})):[],a=n&&n.additionalInfo?n.additionalInfo:"",c=n&&n.topic?{topic:n.topic,subTopic:n.subTopic}:{topic:" ",subTopic:" "};x(c),j(e),y(t),P(a)}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(H.a,{onSubmit:function(e){e.preventDefault()},children:[Object(a.jsx)(fe,{handleTopicAndSubject:function(e){x(Object(h.a)(Object(h.a)({},O),{},Object(de.a)({},e.target.name,e.target.value)))},topic:O.topic,subtopic:O.subTopic}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){return j(e)},setContents:p,showToolbar:!0,enableToolbar:!0})}),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,primary:!0,disabled:o&&!s,onClick:function(e){e.preventDefault(),y([].concat(Object(re.a)(g),[{option:"",isCorrect:!1}]))},icon:"add",content:"Answer",labelPosition:"right"})}),g.map((function(e,t){return Object(a.jsx)(H.a.Field,{children:Object(a.jsxs)(H.a.Group,{widths:"1",inline:!0,children:[Object(a.jsx)(H.a.Field,{children:Object(a.jsx)("input",{value:n?e.option:null,onChange:function(e){return function(e,t){var n=Object(re.a)(g);n[t].option=e.target.value,y(n)}(e,t)},type:"text"})}),Object(a.jsx)(B.a,{type:"button",circular:!0,icon:"superscript",disabled:o&&!s,compact:!0,basic:!0,color:"teal"}),Object(a.jsx)(B.a,{type:"button",circular:!0,compact:!0,basic:!0,color:"red",disabled:o&&!s,icon:!0,onClick:function(e){return function(e,t){e.preventDefault();var n=Object(re.a)(g);n.splice(t,1),y(n)}(e,t)},children:Object(a.jsx)(V.a,{name:"trash alternate outline"})})]})},"option_".concat(t))})),Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(B.a,{type:"button",compact:!0,primary:!0,disabled:!!T||o,onClick:function(e){e.preventDefault(),P(" ")},content:"Additional Information",icon:"add",labelPosition:"right"})}),Object(a.jsx)(H.a.Field,{children:T?Object(a.jsx)(he.a,{autoFocus:!0,setOptions:{buttonList:xe},onChange:function(e){P(e)},setContents:T,showToolbar:!0,enableToolbar:!0}):null}),Object(a.jsx)(B.a,{basic:!0,color:"green",content:"Save Question",disabled:o&&!s,icon:"save",labelPosition:"right"})]})})},ye="normal",Se="comprehension",Ce=function(e){var t=e.updatePaperContent,n=e.retrievedQuestion,i=void 0===n?{}:n,o=e.index,r=Object(c.useState)(i?i.questionType:ye),s=Object(f.a)(r,2),l=s[0],u=s[1],p=Object(c.useContext)(G),j=p.authToken,b=p.paperID,d=p.isSubmitted,O=p.isSpecialPaper,x=p.createNotification,m=p.addQuestion,v=p.paperGrade,g=p.paperSubject,y=function(e,n){e.paperID=b,m(Object(h.a)(Object(h.a)({},e),{},{paperGrade:v,paperSubject:g}),j,O).then((function(e){var a=e.data;if(!a.success)throw new Error("Failed to create/update question");t(a.question,n),x("Success!!","success","Question created successfully")})).catch((function(e){x("Error!!","danger",e.message)}))};return Object(a.jsxs)(be,{children:[Object(a.jsx)(H.a,{style:{marginBottom:"10px"},children:Object(a.jsx)(H.a.Field,{children:Object(a.jsx)(z.a,{disabled:d,onChange:function(e,t){var n=t.value;u(n)},selection:!0,fluid:!0,defaultValue:i&&i.questionType?i.questionType:"normal",options:[{key:1,text:"Normal",value:"normal"},{key:2,text:"Comprehension",value:"comprehension"},{key:3,text:"CBC",value:"cbc"}],placeholder:"Choose Question Type"})})}),i?function(e,t){switch(e.questionType){case ye:return Object(a.jsx)(me,{isSubmitted:d,saveQuestionToDatabase:y,retrievedQuestion:i,index:t});case Se:return Object(a.jsx)(ve,{isSubmitted:d,saveQuestionToDatabase:y,retrievedQuestion:i,index:t});case"cbc":return Object(a.jsx)(ge,{isSubmitted:d,saveQuestionToDatabase:y,retrievedQuestion:i,index:t});default:return null}}(i,o):function(e){switch(e){case ye:return Object(a.jsx)(me,{saveQuestionToDatabase:y});case Se:return Object(a.jsx)(ve,{saveQuestionToDatabase:y});case"cbc":return Object(a.jsx)(ge,{saveQuestionToDatabase:y});default:return null}}(l)]})},Te=n(304),Pe=function(e){var t=e.isActive,n=e.setIsActive,i=e.setIsSubmitted,o=Object(c.useContext)(G),r=o.authToken,s=o.isSubmittedDispatch,l=o.fetchPapers,u=o.socketIO,p=Object(c.useState)(""),j=Object(f.a)(p,2),b=(j[0],j[1]),d=function(e){console.log(e),b((function(t){return t+e+"\n"}))};return u.on("submission_status",(function(e){d(e)})),u.on("submission_error",(function(e){d(e),setTimeout((function(){n(!1)}),3e3)})),u.on("submission_end",(function(e){d(e),i(!0),s(!0),l(r),setTimeout((function(){n(!1)}),3e3)})),Object(a.jsx)(Te.a,{active:t,children:Object(a.jsx)(oe.a,{content:"submitting paper ... please wait ..."})})},De="can:review",ke=function(){return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"500px"},children:Object(a.jsx)("img",{src:"/no_questions.svg",style:{height:"150px",objectFit:"contain"},alt:"no questions found holder"})})},Ie=function(e){var t=e.fetched_questions,n=void 0===t?[]:t,o=e.pageCount,r=e.setCurrectActivePage,s=e.currentActivePage,l=Object(c.useContext)(G),u=l.authToken,p=l.createNotification,j=l.paperID,b=l.setIsSample,O=l.changePaperID,h=l.removePaper,x=l.paperName,m=l.fetchPapers,v=l.isSubmitted,g=l.submitPaperDispatch,y=l.approveQuestionDispatch,S=l.removeQuestionDispatch,C=l.socket_io_id,T=l.paperType,P=l.isSpecialPaper,D=l.roles,k=function(e){return D.includes(e)},I=k(De),_=Object(c.useState)(new Array(n.length).fill(!0)),F=Object(f.a)(_,2),E=F[0],w=F[1],A=Object(c.useState)([]),N=Object(f.a)(A,2),q=N[0],Q=N[1],R=Object(c.useState)(!1),L=Object(f.a)(R,2),M=L[0],H=L[1],z=Object(c.useState)(!1),U=Object(f.a)(z,2),Y=U[0],J=U[1];Object(c.useEffect)((function(){Q(n),H(v)}),[]),Object(c.useEffect)((function(){Q(n)}),[n]);var W=function(e,t){var n=Object(re.a)(q);n[t]=e,Q(n)},X=function(){g(C,j,u).then((function(e){var t=e.data;if(!t.success)throw new Error("Failed to submit paper for review");J(!0),p("Success!","success",t.message)})).catch((function(e){console.log(e),p("Error!","danger",e.message)}))},$=function(e,t){y(e,t,u).then((function(e){if(!e.data.success)throw new Error("Failed to approve question");!function(e,t){var n=Object(re.a)(q);n[t].status=e,Q(Object(re.a)(n))}("approved",t)})).catch((function(e){p("Error!","danger",e.message)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Pe,{isActive:Y,setIsActive:J,setIsSubmitted:H}),Object(a.jsxs)(ue.a.div,{initial:{opacity:0},animate:{opacity:1,duration:.4},children:[Object(a.jsxs)("div",{style:{marginBottom:"10px",borderBottom:"1px solid #dbdbdb",paddingBottom:"1px"},children:[Object(a.jsx)(B.a,{compact:!0,basic:!0,color:"teal",disabled:M,onClick:function(e){Q([].concat(Object(re.a)(q),[null]))},content:"create question",icon:"add",labelPosition:"right"}),Object(a.jsx)(B.a,{compact:!0,basic:!0,color:"orange",disabled:k(De)||M,onClick:X,content:"submit paper",icon:"send",labelPosition:"right"}),Object(a.jsx)(B.a,{compact:!0,basic:!0,color:"green",disabled:k(De)||M,onClick:X,content:"Preview paper",icon:"eye",labelPosition:"right"}),Object(a.jsx)(B.a,{compact:!0,basic:!0,color:"red",disabled:M&&!I,onClick:function(){window.confirm("are you sure?")&&h(j,u,P).then((function(e){var t=e.data;if(t){if(t.success)return p("Success!!","success","Paper deleted successfully"),m(u),void O(null);throw new Error(t.error)}})).catch((function(e){p("Error!!","danger",e.message)}))},content:"delete paper",icon:"trash alternate outline",labelPosition:"right"}),Object(a.jsxs)("div",{style:{margin:"5px"},children:[Object(a.jsxs)(Z.a,{children:["Paper Type",Object(a.jsx)(Z.a.Detail,{children:T})]}),Object(a.jsxs)(Z.a,{children:["Paper Name",Object(a.jsx)(Z.a.Detail,{children:x})]}),Object(a.jsxs)(Z.a,{children:["Number of Questions",Object(a.jsx)(Z.a.Detail,{children:q.length})]}),Object(a.jsxs)(Z.a,{children:["Submitted",Object(a.jsx)(Z.a.Detail,{children:Object(a.jsx)(V.a,{color:v?"green":"red",name:v?"check circle outline":"ban"})})]})]})]}),Object(a.jsxs)("div",{style:{height:"100%",paddingRight:"6px",paddingLeft:"4px"},children:[q.length?Object(a.jsx)(a.Fragment,{children:q.map((function(e,t){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(d.a.Group,{horizontal:!0,compact:!0,children:[Object(a.jsx)(d.a,{onClick:function(e){return function(e){var t=Object(re.a)(E);t[e]=!t[e]||!t[e],w(t)}(t)},style:{cursor:"pointer"},color:"orange",children:Object(a.jsxs)(K.a,{as:"h3",children:["Question  ",t+1]})}),Object(a.jsx)(d.a,{basic:!0,textAlign:"center",color:"green",children:Object(a.jsx)(Z.a,{color:"green",children:e&&e.status?e.status.toUpperCase():"ONGOING"})}),Object(a.jsxs)(d.a,{basic:!0,textAlign:"right",color:"red",children:[e&&null!==e._id&&k(De)?Object(a.jsx)(B.a,{basic:!0,compact:!0,color:"olive",icon:!0,onClick:function(n){return function(e,t,n){b(u,t,n).then((function(t){if(t){var a=Object(re.a)(q);a[e].isSample=n,Q(a)}}))}(t,e&&e._id,e&&!e.isSample)},content:e&&e.isSample?"remove sample":"set sample"}):null,M&&k(De)?Object(a.jsx)(B.a,{basic:!0,compact:!0,color:"orange",disabled:e&&e.isExposed,onClick:function(n){return $(e&&e._id,t)},content:"Approve",icon:"thumbs up alternate outline",labelPosition:"right"}):null,Object(a.jsx)(B.a,{compact:!0,basic:!0,color:"red",disabled:v&&!I,onClick:function(n){return function(e,t){if(window.confirm("are you sure?")){var n=Object(re.a)(q),a=n[t],c=function(){n.splice(t,1),Q(n),p("Success!","success","Question removed successfully")};a?S(e,u).then((function(){c()})).catch((function(e){p("Error!","error",e.message)})):c()}}(e?e._id:null,t)},content:"Delete",icon:"trash alternate outline",labelPosition:"right"})]})]}),Object(a.jsx)(se.a,{visible:!E[t]||!E[t],animation:"drop",duration:450,children:Object(a.jsx)("div",{style:{marginBottom:"20px"},children:Object(a.jsx)(Ce,{updatePaperContent:W,retrievedQuestion:e,index:t},"question_".concat(t))})})]},"question_".concat(t))}))}):Object(a.jsx)(ke,{}),o>1?Object(a.jsx)(le.a,{onPageChange:function(e,t){var n=t.activePage;r(n)},defaultActivePage:s,totalPages:o}):null]})]})]})},_e=n(195),Fe=n.n(_e),Ee=[{key:"sample",text:"Samples",value:"isSample"},{key:"none",text:"None",value:"none"}],we=function(e){var t=e.setChooseCategory;return Object(a.jsx)(z.a,{onChange:function(e,n){var a=n.value;t(a)},selection:!0,fluid:!0,options:Ee,placeholder:"Filter"})},Ae=function(e){var t=e.setSearchTerm,n=Object(c.useContext)(G),i=n.setIsRefreshingDispatch,o=n.isRefreshing,r=Object(c.useState)(""),s=Object(f.a)(r,2),l=s[0],u=s[1],p=Object(c.useState)(""),j=Object(f.a)(p,2),b=j[0],d=j[1];Object(c.useEffect)((function(){"none"===b&&i(!o)}),[b]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H.a,{onSubmit:function(e){e.preventDefault();var n={};l&&(n.searchTerm=l),b&&(n.searchCategory=b),t(Fe.a.stringify(n)),u(""),d("")},children:Object(a.jsxs)(H.a.Group,{children:[Object(a.jsx)(H.a.Field,{width:11,children:Object(a.jsx)("input",{type:"search",placeholder:"Search...",onChange:function(e){u(e.target.value)},value:l})}),Object(a.jsx)(H.a.Field,{width:2,children:Object(a.jsx)(we,{setChooseCategory:d})}),Object(a.jsx)(H.a.Field,{width:2,children:Object(a.jsx)(B.a,{content:"SEARCH",icon:"search",color:"green",basic:!0,labelPosition:"right"})})]})}),Object(a.jsx)(O.a,{})]})},Ne=function(){var e=Object(c.useContext)(G),t=e.paperID,n=e.fetchQuestions,i=e.authToken,o=e.isSubmittedDispatch,r=e.updatePaperDetails,s=e.searchForQuestions,l=e.isRefreshing,u=e.isSpecialPaper,p=e.rootPaperName,j=Object(c.useState)([]),b=Object(f.a)(j,2),O=b[0],h=b[1],x=Object(c.useState)(null),m=Object(f.a)(x,2),v=m[0],g=m[1],y=Object(c.useState)(0),S=Object(f.a)(y,2),C=S[0],T=S[1],P=Object(c.useState)(1),D=Object(f.a)(P,2),k=D[0],I=D[1],_=Object(c.useState)(!1),F=Object(f.a)(_,2),E=F[0],w=F[1],A=Object(c.useState)(null),N=Object(f.a)(A,2),q=N[0],Q=N[1];return Object(c.useEffect)((function(){I(1)}),[t]),Object(c.useEffect)((function(){null!==v&&s(i,t,v,u).then((function(e){var t=e.data;t&&t.success&&(T(1),h(t.paper.questions))})).catch((function(e){Q(e.message)}))}),[v]),Object(c.useEffect)((function(){w(!0),n(t,i,u,k-1).then((function(e){var t=e.data;T(t.pageCount),h(t.paper.questions),o(t.paper.isSubmitted),r({grade:u?p:t.paper.grade,subject:t.paper.subject,paperName:u?t.paper.subject:t.paper.paperName,paperType:u?"Special Paper":t.paper.paperType})})).catch((function(e){Q(e.message)})).finally((function(){w(!1)}))}),[t,k,l]),E?Object(a.jsx)("div",{children:Object(a.jsx)(d.a,{children:Object(a.jsx)(oe.a,{active:!0,inline:"centered",children:"Fetching questions..."})})}):q?Object(a.jsx)(d.a,{children:"Error fetching questions"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ae,{setSearchTerm:g}),Object(a.jsx)(Ie,{fetched_questions:O,pageCount:C,setCurrectActivePage:I,currentActivePage:k})]})},qe=n(307),Qe=n.p+"static/media/adminfavi.ee5071ab.jpg",Re=function(){var e=Object(c.useContext)(G).logoutDispatcher;return Object(a.jsxs)(qe.a,{size:"small",attached:"top",style:{marginTop:"5px"},children:[Object(a.jsx)(qe.a.Item,{header:!0,as:l.b,to:"/dashboard",children:Object(a.jsx)("img",{src:Qe,alt:"admin favicon"})}),Object(a.jsx)(qe.a.Menu,{position:"right",children:Object(a.jsx)(qe.a.Item,{children:Object(a.jsx)(B.a,{primary:!0,onClick:function(){return e(),Object(a.jsx)(u.a,{to:"/"})},children:"Sign Out"})})})]})},Ge=function(){return Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%",height:"500px"},children:[Object(a.jsx)("img",{src:"/no_paper.svg",style:{height:"150px",objectFit:"contain"},alt:"no questions found holder"}),Object(a.jsx)("h1",{className:"intro-font",children:"Zoezi Dafina Editor"})]})},Le=function(){var e=Object(c.useContext)(G).paperID;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Re,{}),Object(a.jsx)(s.a,{fluid:!0,children:Object(a.jsx)("div",{style:{marginTop:"5px"},children:Object(a.jsx)(b.a,{children:Object(a.jsxs)(b.a.Row,{children:[Object(a.jsx)(b.a.Column,{width:4,children:Object(a.jsx)(ie,{})}),Object(a.jsx)(b.a.Column,{width:12,children:e?Object(a.jsx)(Ne,{}):Object(a.jsx)(Ge,{})})]})})})})]})},Me=function(){var e=Object(c.useContext)(G),t=e.loginDispatch,n=e.authToken,i=Object(c.useState)(!1),o=Object(f.a)(i,2),r=o[0],s=o[1],l=Object(c.useState)({email:"",password:""}),p=Object(f.a)(l,2),j=p[0],b=p[1],d=function(e){b(Object(h.a)(Object(h.a)({},j),{},Object(de.a)({},e.target.name,e.target.value)))};return n?Object(a.jsx)(u.a,{to:"/dashboard"}):Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"80vh",justifyContent:"center",alignItems:"center",overflowY:"hidden"},children:[Object(a.jsx)("h1",{className:"intro-font",children:"Zoezi Data Entry Tool"}),Object(a.jsx)(je.a,{children:Object(a.jsx)(je.a.Content,{children:Object(a.jsxs)(H.a,{onSubmit:function(e){e.preventDefault(),s(!0),t(j),s(!1)},children:[Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{onChange:d,value:j.email,type:"email",name:"email",placeholder:"Email Address"})]}),Object(a.jsxs)(H.a.Field,{children:[Object(a.jsx)("label",{children:"Password"}),Object(a.jsx)("input",{onChange:d,value:j.password,placeholder:"Password",type:"password",name:"password"})]}),Object(a.jsx)(B.a,{loading:r,primary:!0,fluid:!0,type:"submit",children:"Login"})]})})})]})},Be=function(){return Object(a.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"20px",width:"400px"},children:Object(a.jsx)(Me,{})})},He=function(e){var t=e.component,n=(Object(pe.a)(e,["component"]),Object(c.useContext)(G).authToken);return Object(a.jsx)(u.b,{children:n?Object(a.jsx)(t,{}):Object(a.jsx)(u.a,{to:"/"})})},ze=function(){var e=Object(c.useContext)(G),t=e.authToken,n=e.socketIO,i=e.createNotification,o=e.fetchPapers;return Object(c.useEffect)((function(){t&&n.emit("author regestration",{authToken:t})}),[t]),n.on("review paper",(function(e){i("success","info",String(e)),o(t)})),Object(a.jsx)(a.Fragment,{})};var Ue=function(){return Object(a.jsxs)(l.a,{children:[Object(a.jsx)(j.a,{}),Object(a.jsx)(L,{children:Object(a.jsxs)(s.a,{children:[Object(a.jsx)(ze,{}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",children:Object(a.jsx)(Be,{})}),Object(a.jsx)(He,{path:"/dashboard",component:Le})]})]})})]})};r.a.render(Object(a.jsx)(Ue,{}),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.f5774e9c.chunk.js.map